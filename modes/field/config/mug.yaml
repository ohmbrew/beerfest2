#config_version=5
## #! mode: mug
# This mode counts various hit events and increasingly 'fills' the mug image on mini LCD every other hit.
# Idea is to enable our game mode qualifier mode when the mug fills up. Thinking of using both
# the beer keg and rim rules saucer holes to start a game mode selection.
#mode:
#  start_events: start_mode_mug, ball_started
#  stop_events: stop_mode_mug
#  priority: 150

# this counter does the...counting
counters:
  count_mug_lights:
    count_events: >
      shot_pop_lower_hit, shot_pop_upper_right_hit, shot_pop_upper_left_hit,
      shot_hj_hit, shot_bj_hit, shot_zj_hit, shot_chance_hit, shot_special_hit,
      shot_take_hit_hit, shot_chug_beer_hit, shot_do_shot_hit, shot_quarters_hit, shot_slingleft_hit,
      shot_slingright_hit, shot_slingquarters_hit, shot_tgt_ramp_boot_left_hit, shot_tgt_ramp_boot_right_hit, shot_tavern_hit,
      shot_diverter_hit, shot_ramp_upf_hit, shot_tgt_rimrules_hit, shot_popo_released_hit, shot_upf_tgt_left_hit, shot_upf_tgt_right_hit,
      shot_horseshoe_hit, shot_laneleft_outer_hit, shot_laneleft_inner_hit, shot_laneright_inner_hit, shot_laneright_outer_hit,
      shot_kicker_mode_hit, shot_kicker_rimrules_hit
    count_complete_value: 14
    events_when_hit: fill_mug_X
    events_when_complete: qualified_for_mode_selection
    reset_on_complete: false

# shows the appropriate beer mug image based on count_mug_lights counter
slides:
  fill_mug0:
    widgets:
      - type: image
        image: MiniText-LitShotsFillMug
        animations:
          show_slide:
            - property: opacity
              value: 1
              duration: 0.5s
              easing: in_out_quint
            - property: opacity
              value: 0
              duration: 0.5s
              repeat: true
              easing: in_out_quint
        anchor_x: middle
        anchor_y: middle
        x: middle
        y: middle + 50
      - type: image
        image: beermug0
  fill_mug1:
    widgets:
      - type: image
        image: MiniText-LitShotsFillMug
        animations:
          show_slide:
            - property: opacity
              value: 1
              duration: 0.5s
              easing: in_out_quint
            - property: opacity
              value: 0
              duration: 0.5s
              repeat: true
              easing: in_out_quint
        anchor_x: middle
        anchor_y: middle
        x: middle
        y: middle + 50
      - type: image
        image: beermug1
  fill_mug2:
    widgets:
      - type: image
        image: MiniText-LitShotsFillMug
        animations:
          show_slide:
            - property: opacity
              value: 1
              duration: 0.5s
              easing: in_out_quint
            - property: opacity
              value: 0
              duration: 0.5s
              repeat: true
              easing: in_out_quint
        anchor_x: middle
        anchor_y: middle
        x: middle
        y: middle + 50
      - type: image
        image: beermug2
  fill_mug3:
    widgets:
      - type: image
        image: MiniText-LitShotsFillMug
        animations:
          show_slide:
            - property: opacity
              value: 1
              duration: 0.5s
              easing: in_out_quint
            - property: opacity
              value: 0
              duration: 0.5s
              repeat: true
              easing: in_out_quint
        anchor_x: middle
        anchor_y: middle
        x: middle
        y: middle + 50
      - type: image
        image: beermug3
  fill_mug4:
    widgets:
      - type: image
        image: MiniText-LitShotsFillMug
        animations:
          show_slide:
            - property: opacity
              value: 1
              duration: 0.5s
              easing: in_out_quint
            - property: opacity
              value: 0
              duration: 0.5s
              repeat: true
              easing: in_out_quint
        anchor_x: middle
        anchor_y: middle
        x: middle
        y: middle + 50
      - type: image
        image: beermug4
  fill_mug5:
    widgets:
      - type: image
        image: MiniText-LitShotsFillMug
        animations:
          show_slide:
            - property: opacity
              value: 1
              duration: 0.5s
              easing: in_out_quint
            - property: opacity
              value: 0
              duration: 0.5s
              repeat: true
              easing: in_out_quint
        anchor_x: middle
        anchor_y: middle
        x: middle
        y: middle + 50
      - type: image
        image: beermug5
  fill_mug6:
    widgets:
      - type: image
        image: MiniText-LitShotsFillMug
        animations:
          show_slide:
            - property: opacity
              value: 1
              duration: 0.5s
              easing: in_out_quint
            - property: opacity
              value: 0
              duration: 0.5s
              repeat: true
              easing: in_out_quint
        anchor_x: middle
        anchor_y: middle
        x: middle
        y: middle + 50
      - type: image
        image: beermug6
  fill_mug7:
    widgets:
      - type: image
        image: MiniText-LitShotsFillMug
        animations:
          show_slide:
            - property: opacity
              value: 1
              duration: 0.5s
              easing: in_out_quint
            - property: opacity
              value: 0
              duration: 0.5s
              repeat: true
              easing: in_out_quint
        anchor_x: middle
        anchor_y: middle
        x: middle
        y: middle + 50
      - type: image
        image: beermug7
  
# fill_mug_X event is called whenever count_events are detected. conditional events below call the show
slide_player:
  logicblock_count_mug_lights_updated{value==0}:
    fill_mug0:
      target: mini
  fill_mug_X{count==2}:
    fill_mug1:
      target: mini
  fill_mug_X{count==4}:
    fill_mug2:
      target: mini
  fill_mug_X{count==6}:
    fill_mug3:
      target: mini
  fill_mug_X{count==8}:
    fill_mug4:
      target: mini
  fill_mug_X{count==10}:
    fill_mug5:
      target: mini
  fill_mug_X{count==12}:
    fill_mug6:
      target: mini
  fill_mug_X{count==14}:
    fill_mug7:
      target: mini